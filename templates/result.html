{% extends "base.html" %}

{% block content %}
<h2>Generated Letter</h2>

<div class="letter-box">
    <pre style="white-space: pre-wrap; font-family: inherit; font-size: 16px;">
{{ letter }}
    </pre>
</div>

<!-- Copy to Clipboard Button -->
<button onclick="copyLetter()" class="btn btn-primary" style="margin-top: 10px;">
    Copy Letter
</button>

<!-- Download PDF Button -->
<form action="{{ url_for('download_pdf') }}" method="POST" style="display: inline;">
    <textarea name="letter_text" style="display:none;">{{ letter }}</textarea>
    <button type="submit" class="btn btn-success" style="margin-top: 10px;">
        Download as PDF
    </button>
</form>

<br><br>

<p>
    <a href="{{ url_for('index') }}">‚Üê Back to Templates</a>
</p>

<script>
function copyLetter() {
    // Create a temp textarea
    const textarea = document.createElement("textarea");
    textarea.value = `{{ letter }}`;
    document.body.appendChild(textarea);

    // Select and copy
    textarea.select();
    document.execCommand("copy");

    // Remove
    document.body.removeChild(textarea);

    alert("Letter copied to clipboard!");
}
</script>

{% endblock %}
